<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Desafio Log√≠stica de Expedi√ß√£o</title>
    <style>
        :root {
            --cor-principal: #007BFF;
            --cor-secundaria: #28a745;
            --cor-fundo: #f8f9fa;
            --cor-texto: #343a40;
            --cor-borda: #dee2e6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
        }

        h1 {
            color: var(--cor-principal);
            text-align: center;
            border-bottom: 2px solid var(--cor-borda);
            padding-bottom: 10px;
            margin-bottom: 5px; /* Reduz margem para caber o nome do professor */
        }
        
        .professor-name {
            text-align: center;
            font-size: 1.2em;
            color: #6c757d;
            margin-bottom: 20px;
            display: block;
        }

        .quiz-header, .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid var(--cor-borda);
            border-radius: 5px;
            background-color: #e9ecef;
        }

        #timer {
            font-size: 1.5em;
            font-weight: bold;
            color: #dc3545; /* Cor de alerta */
        }

        #quiz-box {
            display: none;
        }

        .question-box {
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid var(--cor-borda);
            border-radius: 5px;
            background-color: #fff;
        }

        .question-box h3 {
            margin-top: 0;
            color: var(--cor-principal);
        }

        .option-label {
            display: block;
            margin: 8px 0;
            padding: 10px;
            background-color: #f1f1f1;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .option-label:hover {
            background-color: #e2e6ea;
        }

        .option-label input[type="radio"] {
            margin-right: 10px;
        }

        .button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.2s, transform 0.1s;
        }

        .button-primary {
            background-color: var(--cor-principal);
            color: white;
        }

        .button-primary:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
        }

        .button-success {
            background-color: var(--cor-secundaria);
            color: white;
        }

        .button-success:hover {
            background-color: #1e7e34;
            transform: translateY(-1px);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--cor-borda);
            border-radius: 5px;
            box-sizing: border-box;
        }

        #results-box {
            display: none;
            margin-top: 30px;
            padding: 20px;
            border-top: 2px dashed var(--cor-principal);
            text-align: center;
        }

        #ranking-box {
            margin-top: 30px;
            padding: 15px;
            border: 1px solid var(--cor-borda);
            border-radius: 5px;
            background-color: #f1f1f1;
        }

        #ranking-box h3 {
            color: var(--cor-secundaria);
            text-align: center;
        }

        #ranking-list {
            list-style: none;
            padding: 0;
        }

        #ranking-list li {
            padding: 8px;
            border-bottom: 1px dotted var(--cor-borda);
            display: flex;
            justify-content: space-between;
        }

        #ranking-list li:first-child {
            font-weight: bold;
            background-color: #ffe0b2; /* Destaque para o 1¬∫ lugar */
        }

        .medal-icon {
            font-size: 2.5em;
            margin-top: 10px;
        }

        .gold { color: gold; }
        .silver { color: silver; }
        .bronze { color: #cd7f32; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>üöõ Desafio Log√≠stica de Expedi√ß√£o</h1>
        <span class="professor-name">Professor Luiz Eduardo Peixoto</span>
        <p style="text-align: center;">Ol√°, aluno(a)! Voc√™ ter√° **20 minutos** para responder √†s 15 quest√µes sobre os processos cr√≠ticos e avan√ßados da expedi√ß√£o log√≠stica. Boa sorte!</p>
    </header>

    <div id="start-screen">
        <div class="input-group">
            <label for="student-name">üë§ **Seu Nome Completo:**</label>
            <input type="text" id="student-name" placeholder="Digite seu nome para o ranking" maxlength="50">
        </div>
        <button id="start-button" class="button button-primary" onclick="startQuiz()">
            üöÄ Iniciar Atividade (20 Minutos)
        </button>
    </div>

    <div id="quiz-box">
        <div class="quiz-header">
            <span>‚è±Ô∏è **Tempo Restante:** <span id="timer">20:00</span></span>
            <span>üíØ **Pontua√ß√£o:** <span id="score-display">0</span></span>
        </div>

        <form id="quiz-form">
            </form>

        <div class="quiz-controls">
            <button id="finish-button" class="button button-success" onclick="finishQuiz()" disabled>
                ‚úÖ Finalizar e Ver Resultado
            </button>
        </div>
    </div>

    <div id="results-box">
        <h2>üéâ Resultados da Expedi√ß√£o!</h2>
        <p>Parab√©ns, <strong id="final-name"></strong>!</p>
        <p>Voc√™ acertou **<span id="correct-count">0</span>** de 15 quest√µes.</p>
        <p>Sua Pontua√ß√£o Final: **<span id="final-score">0</span>** pontos.</p>
        <p>Tempo Gasto: **<span id="time-spent"></span>**.</p>
        <h3>üèÖ Seu Desempenho</h3>
        <p id="medal-message"></p>
        <div id="medal-icon" class="medal-icon"></div>
    </div>

    <div id="ranking-box">
        <h3>üèÜ Ranking Local de Expedi√ß√£o</h3>
        <ul id="ranking-list">
            </ul>
    </div>
</div>

<script>
    // --- 1. Dados do Quiz ---
    const quizData = [
        {
            question: "Qual √© a principal fun√ß√£o da etapa de 'Planejamento das Entregas' no processo de expedi√ß√£o?",
            options: [
                "Realizar a contagem f√≠sica do estoque.",
                "Definir a melhor sequ√™ncia de carregamento e a roteiriza√ß√£o dos ve√≠culos.",
                "Apenas emitir a nota fiscal do produto.",
                "Selecionar os fornecedores de embalagens.",
                "Aguardar o retorno do ve√≠culo de entrega anterior."
            ],
            answer: 1, // √çndice da op√ß√£o correta (come√ßa em 0)
            points: 10
        },
        {
            question: "O que √© 'Acondicionamento' na expedi√ß√£o log√≠stica?",
            options: [
                "O registro do produto no sistema WMS.",
                "O processo de separa√ß√£o dos itens do estoque ('Picking').",
                "A prepara√ß√£o e embalagem dos produtos para garantir a seguran√ßa no transporte.",
                "A confer√™ncia da documenta√ß√£o fiscal.",
                "A organiza√ß√£o da √°rea de recebimento."
            ],
            answer: 2,
            points: 10
        },
        {
            question: "Qual documento √© essencial para o transporte rodovi√°rio de cargas e deve acompanhar a mercadoria ap√≥s a expedi√ß√£o?",
            options: [
                "Ordem de Compra.",
                "C√©dula de Cr√©dito Banc√°rio.",
                "Nota Fiscal Eletr√¥nica (NF-e) e Conhecimento de Transporte Eletr√¥nico (CT-e).",
                "Ficha de EPI (Equipamento de Prote√ß√£o Individual).",
                "Relat√≥rio de Invent√°rio C√≠clico."
            ],
            answer: 2,
            points: 10
        },
        {
            question: "A 'Confer√™ncia de Pedidos (Checking)' na expedi√ß√£o serve para:",
            options: [
                "Verificar o n√≠vel de combust√≠vel do ve√≠culo.",
                "Garantir que a mercadoria separada corresponde exatamente ao pedido e √† documenta√ß√£o.",
                "Definir a modalidade de pagamento do frete.",
                "Negociar descontos com a transportadora.",
                "Treinar novos colaboradores."
            ],
            answer: 1,
            points: 10
        },
        {
            question: "Qual o principal objetivo da Expedi√ß√£o Log√≠stica?",
            options: [
                "Maximizar o custo de armazenagem.",
                "Garantir a entrega do produto certo, na quantidade certa, no local certo e no prazo prometido.",
                "Reduzir o quadro de funcion√°rios do armaz√©m.",
                "Atrasar o in√≠cio do transporte.",
                "Criar um novo plano de marketing."
            ],
            answer: 1,
            points: 10
        },
        {
            question: "A √°rea de 'Docas' √© fundamental na expedi√ß√£o para:",
            options: [
                "Realizar reuni√µes com a equipe de vendas.",
                "Servir como √°rea de lazer para os motoristas.",
                "Controlar e otimizar o processo de carga e descarga dos ve√≠culos.",
                "Armazenar produtos de alto valor.",
                "Conduzir auditorias financeiras."
            ],
            answer: 2,
            points: 10
        },
        {
            question: "O termo 'Cross-Docking' na expedi√ß√£o refere-se a um processo onde:",
            options: [
                "A mercadoria √© armazenada por um longo per√≠odo.",
                "O produto √© entregue em uma doca e imediatamente transferido para outra doca para expedi√ß√£o, minimizando ou eliminando a armazenagem.",
                "Apenas produtos perec√≠veis s√£o manuseados.",
                "O transporte √© realizado exclusivamente por via a√©rea.",
                "Os pedidos s√£o separados individualmente por cliente."
            ],
            answer: 1,
            points: 10
        },
        {
            question: "O que √© 'Roteiriza√ß√£o' no contexto da expedi√ß√£o?",
            options: [
                "O processo de fabrica√ß√£o do produto.",
                "A determina√ß√£o dos ve√≠culos que ser√£o utilizados.",
                "O planejamento dos melhores trajetos para as entregas, visando otimiza√ß√£o de tempo e custos.",
                "O preenchimento de formul√°rios de feedback.",
                "A confer√™ncia da validade dos produtos."
            ],
            answer: 2,
            points: 10
        },
        {
            question: "Qual etapa vem *imediatamente antes* da Expedi√ß√£o no fluxo log√≠stico padr√£o?",
            options: [
                "P√≥s-Venda.",
                "Recebimento.",
                "Faturamento.",
                "Separac√£o (Picking).",
                "Compra de Mat√©ria-Prima."
            ],
            answer: 3,
            points: 10
        },
        {
            question: "No 'Carregamento', o que √© crucial para evitar danos √† mercadoria e otimizar o transporte?",
            options: [
                "Deixar espa√ßos vazios intencionalmente.",
                "Garantir a correta distribui√ß√£o e amarra√ß√£o da carga no ve√≠culo.",
                "Realizar a emiss√£o da Nota Fiscal nesse momento.",
                "Utilizar apenas ve√≠culos pequenos.",
                "N√£o documentar o processo."
            ],
            answer: 1,
            points: 10
        },
        {
            question: "Qual tecnologia √© mais utilizada para otimizar a velocidade e precis√£o da confer√™ncia e leitura de itens durante a expedi√ß√£o?",
            options: [
                "Fax.",
                "C√≥digo de Barras e RFID (Identifica√ß√£o por Radiofrequ√™ncia).",
                "M√°quina de escrever.",
                "Telefone fixo.",
                "Tinta invis√≠vel."
            ],
            answer: 1,
            points: 10
        },
        // --- Quest√µes Avan√ßadas (12, 13, 14, 15) ---
        {
            question: "Como o Sistema de Gerenciamento de Armaz√©m (WMS) otimiza a etapa de Picking e Expedi√ß√£o, conforme o material de apoio?",
            options: [
                "Apenas substitui a planilha de controle de estoque por um software, sem impacto na produtividade.",
                "Otimiza rotas de separa√ß√£o (Picking), fornece endere√ßamento din√¢mico e automatiza a confer√™ncia de sa√≠da (Checking), garantindo a acuracidade de separa√ß√£o e expedi√ß√£o.",
                "√â um sistema focado apenas no transporte, n√£o tendo rela√ß√£o com as opera√ß√µes internas de armaz√©m.",
                "Sua principal fun√ß√£o √© a emiss√£o do CTe e da Nota Fiscal, independentemente do controle de estoque.",
                "Gera relat√≥rios financeiros, mas n√£o interfere no controle de invent√°rio ou na movimenta√ß√£o f√≠sica."
            ],
            answer: 1,
            points: 15 // Valor maior para quest√µes avan√ßadas
        },
        {
            question: "Analisando as estrat√©gias de Picking, qual afirma√ß√£o compara corretamente o Picking por Lote e o Picking por Onda?",
            options: [
                "O Picking por Lote √© mais focado em agilidade no transporte, enquanto o Picking por Onda √© mais simples para pequenos volumes.",
                "O Picking por Lote aumenta a produtividade ao separar itens de *v√°rios pedidos* em uma √∫nica rota; o Picking por Onda foca em sincronizar a separa√ß√£o de pedidos com o agendamento de ve√≠culos (Docas), sendo a chave para a produtividade e o cumprimento de prazos.",
                "O Picking por Lote √© a estrat√©gia mais simples com menor margem de erro, sendo o Picking por Onda ideal para itens com alta rotatividade (Curva A).",
                "Ambas as estrat√©gias s√£o id√™nticas, mudando apenas a nomenclatura de acordo com o segmento de mercado.",
                "O Picking por Onda √© ideal para a separa√ß√£o de um √∫nico item por vez, enquanto o Picking por Lote foca na acuracidade do invent√°rio c√≠clico."
            ],
            answer: 1,
            points: 15
        },
        {
            question: "Em rela√ß√£o ao Invent√°rio, o que √© Acuracidade de Invent√°rio?",
            options: [
                "Acuracidade √© a diferen√ßa entre o estoque de seguran√ßa e o ponto de pedido. O C√≠clico √© feito anualmente, e o Rotativo, diariamente.",
                "Acuracidade √© o percentual de conformidade entre o estoque f√≠sico e o estoque registrado no sistema (WMS/ERP).",
                "Acuracidade √© apenas a confer√™ncia do peso da carga. Ambos os invent√°rios s√£o m√©todos de contagem total (geral).",
                "A Acuracidade deve ser sempre zero para indicar que o estoque est√° perfeito. O C√≠clico √© usado para contagem de ativos fixos e o Rotativo para materiais de consumo.",
                "Acuracidade √© o tempo que leva para encontrar um item no armaz√©m. O Invent√°rio C√≠clico √© uma contagem parcial e o Rotativo √© a verifica√ß√£o da embalagem."
            ],
            answer: 1,
            points: 15
        },
        {
            question: "Qual a principal distin√ß√£o operacional entre a t√©cnica de Cross-docking e o modelo log√≠stico tradicional com armazenagem?",
            options: [
                "O Cross-docking exige longo prazo de armazenagem. Transit Point √© a fase final do transporte.",
                "O Cross-docking elimina ou minimiza a estocagem, pois o produto √© transferido do recebimento para a expedi√ß√£o imediatamente, sendo o principal risco a necessidade de perfeita sincronia.",
                "O Cross-docking utiliza apenas transporte a√©reo, enquanto o modelo tradicional utiliza rodovi√°rio. O Transit Point √© um ponto de venda.",
                "A principal distin√ß√£o √© fiscal. Transit Point √© um m√©todo de invent√°rio.",
                "O Cross-docking exige que a doca de recebimento e expedi√ß√£o sejam separadas por um corredor de 50 metros. Transit Point √© o momento em que o produto √© checado."
            ],
            answer: 1,
            points: 15
        }
    ];

    // --- 2. Vari√°veis de Estado ---
    let timerInterval;
    const timeLimit = 20 * 60; // 20 minutos em segundos
    let timeLeft = timeLimit;
    let quizStarted = false;
    let startTime;
    let studentName = '';
    let currentScore = 0;
    const totalQuestions = quizData.length;
    // Recalcula total de pontos com base nas 11 quest√µes de 10pts e 4 de 15pts: 110 + 60 = 170
    const totalPoints = quizData.reduce((sum, q) => sum + q.points, 0);


    // --- 3. Fun√ß√µes do Quiz (Manuten√ß√£o) ---

    function generateQuiz() {
        const quizForm = document.getElementById('quiz-form');
        quizForm.innerHTML = ''; // Limpa o conte√∫do anterior

        quizData.forEach((q, index) => {
            const questionBox = document.createElement('div');
            questionBox.className = 'question-box';

            const questionHeader = document.createElement('h3');
            questionHeader.textContent = `Quest√£o ${index + 1} (${q.points} pts)`;
            questionBox.appendChild(questionHeader);

            const questionText = document.createElement('p');
            questionText.textContent = q.question;
            questionBox.appendChild(questionText);

            // Embaralhar op√ß√µes localmente para interatividade
            const optionsIndices = [...Array(q.options.length).keys()];

            optionsIndices.forEach(optIndex => {
                const label = document.createElement('label');
                label.className = 'option-label';

                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `question_${index}`;
                radio.value = optIndex; // O valor √© o √≠ndice original da op√ß√£o
                radio.required = true;

                label.appendChild(radio);
                label.appendChild(document.createTextNode(q.options[optIndex]));
                
                questionBox.appendChild(label);
            });

            quizForm.appendChild(questionBox);
        });
    }

    function updateTimer() {
        if (!quizStarted) return;

        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('timer').textContent = 
            `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            finishQuiz(true); // Chama finishQuiz com timeout = true
            return;
        }

        timeLeft--;
    }

    function startQuiz() {
        studentName = document.getElementById('student-name').value.trim();

        if (studentName.length < 3) {
            alert("Por favor, digite seu nome completo para iniciar o quiz.");
            return;
        }

        // Configura√ß√µes iniciais
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-box').style.display = 'block';
        document.getElementById('results-box').style.display = 'none';
        document.getElementById('finish-button').disabled = false;
        
        // Gera√ß√£o das quest√µes
        generateQuiz();

        // Inicia o Cron√¥metro e o Estado
        timeLeft = timeLimit;
        startTime = new Date().getTime();
        quizStarted = true;
        currentScore = 0;
        document.getElementById('score-display').textContent = '0';
        updateTimer();
        timerInterval = setInterval(updateTimer, 1000);
    }

    function calculateScore() {
        let correctAnswers = 0;
        let totalScore = 0;
        const form = document.getElementById('quiz-form');
        const formData = new FormData(form);

        quizData.forEach((q, index) => {
            const userAnswer = parseInt(formData.get(`question_${index}`));
            if (userAnswer === q.answer) {
                correctAnswers++;
                totalScore += q.points;
            }
        });

        return { correctAnswers, totalScore };
    }

    function finishQuiz(timedOut = false) {
        if (!quizStarted) return; // Garante que o quiz est√° ativo
        
        clearInterval(timerInterval);
        quizStarted = false;

        const endTime = new Date().getTime();
        const timeTakenSec = timeLimit - (timedOut ? 0 : timeLeft);
        const timeSpent = timeTakenSec;
        const timeSpentMin = Math.floor(timeSpent / 60);
        const timeSpentSec = timeSpent % 60;
        const timeSpentFormatted = `${timeSpentMin.toString().padStart(2, '0')}:${timeSpentSec.toString().padStart(2, '0')}`;

        const { correctAnswers, totalScore } = calculateScore();

        // Exibir resultados
        document.getElementById('quiz-box').style.display = 'none';
        document.getElementById('results-box').style.display = 'block';
        
        document.getElementById('final-name').textContent = studentName;
        document.getElementById('correct-count').textContent = correctAnswers;
        document.getElementById('final-score').textContent = totalScore;
        document.getElementById('time-spent').textContent = timedOut ? `Tempo esgotado (usou os 20:00)` : timeSpentFormatted;
        
        // Sistema de Medalhas (Baseado na Pontua√ß√£o Percentual)
        let medal = { message: 'Continue estudando! √â hora de revisar o b√°sico.', icon: 'üö´' };
        const percentage = (totalScore / totalPoints) * 100;
        
        if (percentage >= 90) { // Praticamente gabaritar
            medal = { message: 'Log√≠stico MASTER! Excel√™ncia em Expedi√ß√£o e Conhecimento Avan√ßado! ü•á', icon: 'üèÜ' };
            document.getElementById('medal-icon').className = 'medal-icon gold';
        } else if (percentage >= 75) { 
            medal = { message: 'Parab√©ns, Expedidor Pleno! √ìtimo desempenho, foco nos conceitos avan√ßados! ü•à', icon: 'ü•à' };
            document.getElementById('medal-icon').className = 'medal-icon silver';
        } else if (percentage >= 60) { 
            medal = { message: 'Bom trabalho, Expedidor J√∫nior! Processos bem compreendidos, mas h√° espa√ßo para subir no ranking. ü•â', icon: 'ü•â' };
            document.getElementById('medal-icon').className = 'medal-icon bronze';
        } else {
             document.getElementById('medal-icon').className = 'medal-icon';
        }
        
        document.getElementById('medal-message').textContent = medal.message;
        document.getElementById('medal-icon').textContent = medal.icon;

        // Registrar no Ranking e Exibir
        const rankEntry = {
            name: studentName,
            score: totalScore,
            time: timeSpent, // Tempo em segundos para desempate
            timeFormatted: timeSpentFormatted
        };

        saveRanking(rankEntry);
        displayRanking();
        
        // Op√ß√£o para recome√ßar (opcional)
        // document.getElementById('start-screen').style.display = 'block';
        // document.getElementById('student-name').value = '';
    }

    // --- 4. Fun√ß√µes de Ranking Local (LocalStorage) ---

    function getRanking() {
        const ranking = localStorage.getItem('quizExpedicaoRanking');
        return ranking ? JSON.parse(ranking) : [];
    }

    function saveRanking(newEntry) {
        let ranking = getRanking();
        ranking.push(newEntry);
        
        // Ordenar: 1¬∫ por pontua√ß√£o (maior para menor), 2¬∫ por tempo (menor para maior)
        ranking.sort((a, b) => {
            if (b.score !== a.score) {
                return b.score - a.score; // Maior pontua√ß√£o primeiro
            }
            return a.time - b.time; // Menor tempo primeiro (desempate)
        });

        // Limitar o ranking a, por exemplo, 10 entradas
        ranking = ranking.slice(0, 10); 
        
        localStorage.setItem('quizExpedicaoRanking', JSON.stringify(ranking));
    }

    function displayRanking() {
        const ranking = getRanking();
        const rankingList = document.getElementById('ranking-list');
        rankingList.innerHTML = '';
        
        if (ranking.length === 0) {
            rankingList.innerHTML = '<li>Nenhum resultado registrado ainda. Seja o primeiro!</li>';
            return;
        }

        ranking.forEach((entry, index) => {
            const listItem = document.createElement('li');
            const medalEmoji = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üîπ';
            
            listItem.innerHTML = `
                ${medalEmoji} **${entry.name}**
                <span>${entry.score} pts (${entry.timeFormatted})</span>
            `;
            
            rankingList.appendChild(listItem);
        });
    }

    // Inicializa a exibi√ß√£o do ranking ao carregar a p√°gina
    window.onload = function() {
        displayRanking();
    };

</script>
</body>
</html>